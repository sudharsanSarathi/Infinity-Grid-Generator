<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Infinity Grid</title>
  <style>
     @font-face {
      font-family: 'MyCustomFont';
      src: url('fonts/Poppins-Regular.ttf') format('truetype');
      font-weight: normal;
      font-style: normal;
    }
    @font-face {
      font-family: 'MyCustomFont';
      src: url('fonts/Poppins-SemiBold.ttf') format('truetype');
      font-weight: bold;
      font-style: normal;
    }

    body {
      min-height: 100vh;
      background: url('bg5.webp') no-repeat center center;
      background-size: cover;
      color: #fff;
      font-family: 'MyCustomFont', Arial, sans-serif;
      margin: 0;
      padding: 20px;
      box-sizing: border-box;
      transition: background 0.3s;
      position: relative;
      overflow-x: hidden;
    }
    
    @keyframes moveGradient {
      0% {
        background-position: 50% 0%;
      }
      50% {
        background-position: 60% 20%;
      }
      100% {
        background-position: 50% 0%;
      }
    }
    .title-svg {
      display: block;
      margin: 60px auto 0 auto;
      width: auto;
      scale: 1.2 ;

      max-width: 90vw;
      text-align: -webkit-center;
      object-fit: contain;
     

    }
    .description {
      color: #000000;
      margin: 1px auto 18px auto;
      font-size: 0.98rem;
      text-align: center;
      max-width: 480px;
      line-height: 1.5;
    }
    .see-how-btn {
      display: block;
      margin: 0 auto 32px auto;
      background: linear-gradient(175deg, #4eff50 0%, #007d7e 100%);
      color: #fff;
      border: none;
      border-radius: 10px;
      padding: 12px 28px;
      font-size: 14px;
      font-weight: 700;
      cursor: pointer;
      box-shadow: 0 2px 12px #7D24FF33;
      letter-spacing: 0.01em;
      transition: background 0.2s, color 0.2s;
    }
    .see-how-btn:hover {
      background: linear-gradient(90deg, #a855f7 0%, #7D24FF 100%);
      color: #fff;
    }
    .container {
      background: rgba(18,12,27,0.83);
      border-radius: 24px;
      box-shadow:inset 0px 0px 8px rgba(255, 255, 255, 0.08);
      padding: 40px 28px 28px 28px;
      max-width: 500px;
      margin: 0 auto;
      z-index: 2;
      position: relative;
      backdrop-filter: blur(2px);
      border:1.5px solid #0e7949;
    }
    .tip {
      color: #b3b3b3;
      font-size: 0.93rem;
      margin: 2px 0 18px 0;
      text-align: left;
      max-width: 420px;
    }
    .tip .learn-how {
      color: #60a5fa;
      text-decoration: underline;
      cursor: pointer;
      font-weight: 600;
      margin-left: 2px;
      transition: color 0.2s;
    }
    .tip .learn-how:hover {
      color: #6eeaff;
    }
    label {
      display: block;
      margin-bottom: 8px;
      font-weight: 600;
      color: #dcfffc;
      letter-spacing: 0.01em;
    }
    .input-row {
      display: flex;
      flex-direction: column;
    gap: 20px;
      gap: 20px;
      margin-bottom: 15px;
    }
    .input-row input[type="text"] {
      flex: 1;
      background: #181825;
      border: 1.5px solid #333;
      color: #fff;
      border-radius: 10px;
      padding: 10px 14px;
      font-size: 1.05rem;
      outline: none;
      transition: border 0.2s;
      box-shadow: 0 1px 4px #0002;
    }
    .input-row input[type="text"]:focus {
      border: 1.5px solid #3993ee;
    }
    .add-btn {
      background: linear-gradient(152deg, #69c7f5 0%, #afc8e5 100%);
      color: #232323;
      border: none;
      border-radius: 10px;
      padding: 0 18px;
      height: 53px;
      font-size: 1.2rem;
      font-weight: 700;
      cursor: pointer;
      transition: background 0.2s, color 0.2s, box-shadow 0.2s;
      box-shadow: 0 2px 8px #c084fc33;
    }
    .add-btn:hover {
      background: linear-gradient(152deg, #69c7f5 0%, #afc8e5 100%)
      ;
      color: #232323;
    }
    .url-list {
      margin-bottom: 16px;
    display: flex;
    flex-direction: row;
    gap: 6px;
    flex-wrap: wrap;

    }
    .url-chip {
      display: flex;
      align-items: center;
      background: #354656;
      color: #cbecf9;
      border-radius: 10px;
      padding: 7px 12px 7px 12px;
      font-size: 1rem;
      gap: 8px;
      width: fit-content;
      max-width: 100%;
      overflow: hidden;
      position: relative;
      box-shadow: 0 1px 4px #0002;
    }
    .url-chip span {
      display: inline-block;
      max-width: calc(100vw - 120px);
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      vertical-align: middle;
    }
    .remove-btn {
      background: none;
      border: none;
      color: #ffffff;
      font-size: 1.2rem;
      cursor: pointer;
      margin-left: 8px;
      font-weight: 900;
      transition: color 0.2s;
      padding: 0 4px;
    }
    .remove-btn:hover {
      color: #ff6b81;
    }
    .color-row {
      display: flex;
      align-items: center;
      gap: 4px;
      margin-bottom: 18px;
    }
    .color-row input[type="color"] {
      width: 38px;
      height: 38px;
      border: none;
      border-radius: 10px;
      background: none;
      cursor: pointer;
      box-shadow: 0 1px 4px #0002;
    }
    .color-row input[type="text"] {
      width: 110px;
      background: rgba(18,12,27,0.83);;
      border: 1.5px solid #333;
      color: #fff;
      border-radius: 10px;
      padding: 10px 14px;
      font-size: 1.05rem;
      outline: none;
      box-shadow: 0 1px 4px #0002;
    }
    .color-row input[type="text"]:focus {
      border: 1.5px solid #3993ee;
    }
    .input-group {
      margin-bottom: 28px;
    }
    .generate-btn, .copy-btn {
      width: 100%;
      background:linear-gradient(152deg, #69c7f5 0%, #afc8e5 100%)
      ;
      color: #232323;
      border: none;
      border-radius: 12px;
      padding: 16px 0;
      font-size: 1.15rem;
      font-weight: 700;
      cursor: pointer;
      margin-top: 8px;
      margin-bottom: 16px;
      transition: background 0.2s, box-shadow 0.2s;
      box-shadow: 0 2px 12px #c084fc33;
      letter-spacing: 0.01em;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
    }
    .generate-btn:hover, .copy-btn:hover {
      background: linear-gradient(152deg, #69c7f5 0%, #afc8e5 100%);
    }
    .copy-btn.copied {
      background: linear-gradient(90deg, #22c55e 0%, #16a34a 100%);
      color: #fff;
    }
    .copy-btn .tick {
      font-size: 1.2em;
      color: #22c55e;
      margin-left: 4px;
    }
    .iframe-code-block {
      background: rgba(18,12,27,0.83);;
      color: #fff;
      border-radius: 10px;
      padding: 18px;
      font-size: 1.01rem;
      margin-bottom: 12px;
      word-break: break-all;
      border: 1.5px solid #4f46e5;
      font-family: 'JetBrains Mono', 'Fira Mono', 'Menlo', monospace;
      box-shadow: 0 1px 4px #0002;
      position: relative;
      transition: box-shadow 0.5s, border-color 0.5s;
      user-select: all;
      cursor: pointer;
    }
    .iframe-code-block.shimmer {
      box-shadow: 0 0 16px 4px #c084fc, 0 0 32px 8px #60a5fa66;
      border-color: #c084fc;
      animation: shimmerGlow 1.2s ease-in-out;
    }
    @keyframes shimmerGlow {
      0% {
        box-shadow: 0 0 0 0 #c084fc, 0 0 0 0 #60a5fa66;
        border-color: #4f46e5;
      }
      20% {
        box-shadow: 0 0 16px 4px #c084fc, 0 0 32px 8px #60a5fa66;
        border-color: #c084fc;
      }
      80% {
        box-shadow: 0 0 16px 4px #c084fc, 0 0 32px 8px #60a5fa66;
        border-color: #c084fc;
      }
      100% {
        box-shadow: 0 1px 4px #0002;
        border-color: #4f46e5;
      }
    }
    .grid-preview-title {
      color: #06bead;
      font-size: 1.08rem;
      font-weight: 700;
      margin: 18px 0 8px 0;
      text-align: left;
      letter-spacing: 0.01em;
    }
    .iframe-preview {
      width: 100%;
      height: 450px !important;
      min-height: 450px !important;
      max-height: 450px !important;
      border: 1.5px solid #4f46e5;
      border-radius: 10px;
      margin-bottom: 18px;
      background: #111;
      box-shadow: 0 1px 4px #0002;
      overflow: hidden;
      display: block;
    }
    .toast {
      position: fixed;
      left: 50%;
      top: 40px;
      transform: translateX(-50%);
      background:linear-gradient(90deg, #171717 0%, #1f1f1f 100%);
      color: #fff;
      padding: 14px 32px;
      border-radius: 12px;
      font-size: 1.08rem;
      font-weight: 600;
      box-shadow: 0 2px 12px #c084fc33;
      opacity: 0;
      pointer-events: none;
      z-index: 9999;
      transition: opacity 0.3s, top 0.3s;
    }
    .toast.show {
      opacity: 1;
      top: 70px;
      pointer-events: auto;
    }
    .footer {
      position: fixed;
      bottom: 0;
      left: 0;
    
      display: flex;
      justify-content: center;
      align-items: center;
      height: 80px;
      z-index: 9999;
      cursor: pointer;
      background: rgba(18,12,27,0.83);
    }
    .footer a {
      color: #fff;
      text-decoration: none;
      font-weight: 700;
      padding: 10px 24px;
      border-radius: 12px;
      transition: background 0.2s, color 0.2s;
      display: inline-block;
      box-shadow: 0 2px 12px #7D24FF33;
    }
    .footer a:hover {
      background: #7D24FF;
      color: #fff;
      text-decoration: underline;
    }
    /* Overlay styles */
    .overlay {
      position: fixed;
      top: 0; left: 0; right: 0; bottom: 0;
      background: rgba(24, 18, 34, 0.92);
      z-index: 10000;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: opacity 0.2s;
      opacity: 0;
      pointer-events: none;
    }
    .overlay.show {
      opacity: 1;
      pointer-events: auto;
    }
    .overlay-content {
      background: #232232;
      border-radius: 18px;
      box-shadow: 0 8px 40px #000a, 0 1.5px 0 #c084fc44 inset;
      padding: 32px 24px 24px 24px;
      max-width: 480px;
      width: 96vw;
      position: relative;
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    .close-btn {
      position: absolute;
      left: 50%;
      top: -38px;
      transform: translateX(-50%);
      background: #6eeaff;
      color: #000000;
      border: none;
      border-radius: 50%;
      width: 36px;
      height: 36px;
      font-size: 1.3rem;
      font-weight: 700;
      cursor: pointer;
      box-shadow: 0 2px 8px #c084fc33;
      transition: background 0.2s, color 0.2s;
      z-index: 2;
      padding: 0;
      margin-bottom: 24px;
    }
    .close-btn:hover {
      background: #a855f7;
      color: #fff;
    }
    .overlay-title {
      color: #fff;
      font-size: 1.2rem;
      font-weight: 500;
      margin-bottom: 18px;
      text-align: center;
    }
    .vimeo-player {
      width: 100%;
      max-width: 400px;
      aspect-ratio: 16/9;
      border-radius: 12px;
      border: none;
      box-shadow: 0 2px 12px #0004;
      margin-bottom: 8px;
    }
    @media (max-width: 600px) {
      .title-svg {
        height: 70px;
      }
      .container {
        max-width: 98vw;
        padding: 28px 4vw 28px 4vw;
      }
      .url-chip span {
        max-width: 70vw;
      }
      .overlay-content {
        max-width: 98vw;
        padding: 12px 2vw 12px 2vw;
      }
      .vimeo-player {
        max-width: 90vw;
      }
      .close-btn {
        top: -28px;
        width: 32px;
        height: 32px;
        font-size: 1.1rem;
      }
    }
    .title-svg, .description, .main-content {
      position: relative;
      z-index: 2;
    }
    footer {
      z-index: 9999 !important;
    }
    .preview-container {
      width: 100vw;
      height: 36vh;
      position: relative;
      margin: -40px -20px 20px -20px;
      overflow: hidden;
      transition: height 0.5s cubic-bezier(0.4, 0, 0.2, 1);
    }
    .preview-container.expanded {
      height: 54vh;  /* Increased from 45vh to 54vh (20% more) */
    }
    .preview-iframe {
      width: 100%;
      height: 100%;
      border: none;
      background: #181818;
      transform-origin: top center;
      transition: transform 0.5s cubic-bezier(0.4, 0, 0.2, 1);
    }
   
    .preview-gradient {
      position: absolute;
      bottom: 0;
      left: 0;
      box-sizing: border-box;
      width: 100%;
      height: 120px;
      background: linear-gradient(to top, rgba(139, 249, 249, 1) 20%, rgba(139, 249, 249, 0) 100%);
      pointer-events: none;
      z-index: 2;
    }
    .title-svg {
      position: relative;
      z-index: 3;
      margin-top: -9px;
      background: transparent;
    }
    .iframe-code-block {
      user-select: all;
      cursor: pointer;
    }
    /* BMC Button Styles */
    #bmc-wbtn {
      min-width: 170px !important;
      color: #000000 !important;
      background-color: #FFDD00 !important;
      height: 60px !important;
      border-radius: 16px !important;
      padding: 0px 13px !important;
      line-height: 27px !important;
      text-decoration: none !important;
      display: inline-flex !important;
      align-items: center !important;
      box-sizing: border-box !important;
    }
  </style>
</head>
<body>
  <div class="preview-container">
    <iframe class="preview-iframe" id="top-preview" src="https://sudharsansarathi.github.io/infinity-grid/?images=https://ttihvdaqsmhtqyvqxhrb.supabase.co/storage/v1/object/public/griids//image%2030.webp,https://ttihvdaqsmhtqyvqxhrb.supabase.co/storage/v1/object/public/griids//image%2031.webp,https://ttihvdaqsmhtqyvqxhrb.supabase.co/storage/v1/object/public/griids//image%2032.webp,https://ttihvdaqsmhtqyvqxhrb.supabase.co/storage/v1/object/public/griids//image%2033.webp,https://ttihvdaqsmhtqyvqxhrb.supabase.co/storage/v1/object/public/griids//image%2034.webp,https://ttihvdaqsmhtqyvqxhrb.supabase.co/storage/v1/object/public/griids//image%2035.webp,https://ttihvdaqsmhtqyvqxhrb.supabase.co/storage/v1/object/public/griids//image%2036.webp,https://ttihvdaqsmhtqyvqxhrb.supabase.co/storage/v1/object/public/griids//image%2037.webp,https://ttihvdaqsmhtqyvqxhrb.supabase.co/storage/v1/object/public/griids//image%2038.webp,https://ttihvdaqsmhtqyvqxhrb.supabase.co/storage/v1/object/public/griids//image%2039.webp,https://ttihvdaqsmhtqyvqxhrb.supabase.co/storage/v1/object/public/griids//image%2040.webp,https://ttihvdaqsmhtqyvqxhrb.supabase.co/storage/v1/object/public/griids//image%2041.webp,https://ttihvdaqsmhtqyvqxhrb.supabase.co/storage/v1/object/public/griids//image%2042.webp,https://ttihvdaqsmhtqyvqxhrb.supabase.co/storage/v1/object/public/griids//image%2043.webp,https://ttihvdaqsmhtqyvqxhrb.supabase.co/storage/v1/object/public/griids//image%2044.webp,https://ttihvdaqsmhtqyvqxhrb.supabase.co/storage/v1/object/public/griids//image%2045.webp,https://ttihvdaqsmhtqyvqxhrb.supabase.co/storage/v1/object/public/griids//image%2046.webp,https://ttihvdaqsmhtqyvqxhrb.supabase.co/storage/v1/object/public/griids//image%2047.webp,https://ttihvdaqsmhtqyvqxhrb.supabase.co/storage/v1/object/public/griids//image%2048.webp,https://ttihvdaqsmhtqyvqxhrb.supabase.co/storage/v1/object/public/griids//image%2049.webp,https://ttihvdaqsmhtqyvqxhrb.supabase.co/storage/v1/object/public/griids//image%2050.webp,https://ttihvdaqsmhtqyvqxhrb.supabase.co/storage/v1/object/public/griids//image%2051.webp,https://ttihvdaqsmhtqyvqxhrb.supabase.co/storage/v1/object/public/griids//image%2052.webp,https://ttihvdaqsmhtqyvqxhrb.supabase.co/storage/v1/object/public/griids//image%2053.webp,https://ttihvdaqsmhtqyvqxhrb.supabase.co/storage/v1/object/public/griids//image%2054.webp,https://ttihvdaqsmhtqyvqxhrb.supabase.co/storage/v1/object/public/griids//image%2055.webp,https://ttihvdaqsmhtqyvqxhrb.supabase.co/storage/v1/object/public/griids//image%2056.webp,https://ttihvdaqsmhtqyvqxhrb.supabase.co/storage/v1/object/public/griids//image%2057.webp,https://ttihvdaqsmhtqyvqxhrb.supabase.co/storage/v1/object/public/griids//image%2058.webp,https://ttihvdaqsmhtqyvqxhrb.supabase.co/storage/v1/object/public/griids//image%2059.webp,https://ttihvdaqsmhtqyvqxhrb.supabase.co/storage/v1/object/public/griids//image%2060.webp,https://ttihvdaqsmhtqyvqxhrb.supabase.co/storage/v1/object/public/griids//image%2061.webp,https://ttihvdaqsmhtqyvqxhrb.supabase.co/storage/v1/object/public/griids//image%2062.webp,https://ttihvdaqsmhtqyvqxhrb.supabase.co/storage/v1/object/public/griids//image%2064.webp,https://ttihvdaqsmhtqyvqxhrb.supabase.co/storage/v1/object/public/griids//image%2065.webp,https://ttihvdaqsmhtqyvqxhrb.supabase.co/storage/v1/object/public/griids//image%2066.webp,https://ttihvdaqsmhtqyvqxhrb.supabase.co/storage/v1/object/public/griids//image%2067.webp,https://ttihvdaqsmhtqyvqxhrb.supabase.co/storage/v1/object/public/griids//image%2068.webp,https://ttihvdaqsmhtqyvqxhrb.supabase.co/storage/v1/object/public/griids//image%2069.webp&bg=%23000000" style="width:100%;height:600px;border:none;background:#181818;"></iframe>
    <div class="preview-gradient"></div>
  </div>
  <div class="title-svg">
    <svg width="250" height="55" viewBox="0 0 271 55" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path d="M168.752 55C162.189 55 156.427 52.7216 156.427 48.2707C156.427 47.105 156.8 45.9393 157.601 44.7736C156.053 43.7139 155.2 42.0183 155.2 40.1638C155.2 37.3025 157.174 34.0703 161.335 32.1098C159.521 30.1493 158.508 27.659 158.508 24.9566C158.508 18.7572 163.843 13.7765 171.366 13.7765C172.807 13.7765 174.141 13.9355 175.421 14.3064C176.381 10.4383 180.276 7.41811 185.719 7.25915C185.985 7.89499 186.145 8.53083 186.145 9.11368C186.145 10.8092 185.132 12.0279 183.051 12.0279C181.717 12.0279 180.81 11.816 179.476 12.0279C177.982 12.3988 176.862 13.1936 176.221 14.5713C181.023 16.2139 184.171 20.2408 184.171 24.9566C184.171 31.1031 178.782 36.1368 171.366 36.1368C167.578 36.1368 164.323 34.8651 162.029 32.7987C159.681 34.0173 158.561 35.8719 158.561 37.5674C158.561 39.5809 160.215 41.3295 163.416 41.3295C167.898 41.3295 173.447 37.6734 179.209 37.6734C184.491 37.6734 187.212 40.3757 187.212 44.0318C187.212 51.026 177.342 55 168.752 55ZM157.654 47.7938C157.654 51.185 161.602 53.1455 166.724 53.1455C172.753 53.1455 179.316 50.3372 179.316 45.8863C179.316 43.9788 178.089 42.6012 175.421 42.6012C171.419 42.6012 166.564 45.9923 161.922 45.9923C160.535 45.9923 159.361 45.7274 158.401 45.2505C157.921 46.0983 157.654 46.946 157.654 47.7938ZM165.017 24.9037C165.017 30.7322 167.151 35.0241 171.366 35.0241C175.474 35.0241 177.662 30.7322 177.662 24.9566C177.662 19.1281 175.474 14.8362 171.366 14.8362C167.151 14.8362 165.017 19.1281 165.017 24.9037Z" fill="#181818"/>
      <path d="M187.646 41.8593C187.966 39.6339 188.072 37.6734 188.072 34.8651V21.6185C188.072 18.8102 187.966 16.8497 187.646 14.6243H195.169C194.848 16.8497 194.742 18.8102 194.742 21.6185V23.0491C196.929 16.3728 200.824 13.8825 206.32 13.8825C206.64 14.5713 206.853 15.2601 206.853 15.896C206.853 17.6445 205.573 19.2341 203.385 19.2341C200.077 19.2341 196.396 19.764 194.742 24.8507V34.8651C194.742 37.6734 194.848 39.6339 195.169 41.8593H187.646Z" fill="#181818"/>
      <path d="M206.85 41.8593C207.171 39.6339 207.277 37.6734 207.277 34.8651V21.6185C207.277 18.8102 207.171 16.8497 206.85 14.6243H214.427C214.107 16.8497 214 18.8102 214 21.6185V34.8651C214 37.6734 214.107 39.6339 214.427 41.8593H206.85ZM206.317 6.78227L210.639 2.59634L214.96 6.78227L210.639 10.9682L206.317 6.78227Z" fill="#181818"/>
      <path d="M227.843 42.8131C221.281 42.8131 216.479 36.7726 216.479 28.2948C216.479 20.4528 220.801 13.6705 227.683 13.6705C231.525 13.6705 235.206 15.896 237.554 20.1349V6.99422C237.554 4.18593 237.447 2.22543 237.127 0H244.704C244.383 2.22543 244.277 4.18593 244.277 6.99422V33.1166C244.277 37.8324 244.65 39.157 245.504 41.8593H237.928C237.714 39.422 237.607 37.8324 237.554 35.6069C236.007 39.6339 232.592 42.8131 227.843 42.8131ZM223.468 28.4538C223.468 35.395 226.723 39.8459 230.671 39.8459C233.873 39.8459 236.914 36.9316 237.554 32.2688V21.5655C235.9 18.5983 233.286 16.8497 230.671 16.8497C226.243 16.8497 223.468 21.9894 223.468 28.4538Z" fill="#181818"/>
      <path d="M259.529 42.7601C253.873 42.7601 247.951 40.1638 246.35 34.1763C247.044 32.9046 248.004 32.3218 249.125 32.3218C250.512 32.3218 251.792 33.2225 252.486 34.7592C253.98 39.6869 256.968 41.6474 260.222 41.6474C263.157 41.6474 265.504 40.1108 265.504 37.5144C265.504 30.5732 248.057 30.4143 248.057 21.0356C248.057 16.4788 252.166 13.7765 258.141 13.7765C262.57 13.7765 267.212 15.4191 270.413 18.3863C270.36 20.1879 269.399 21.5655 267.639 21.5655C266.038 21.5655 265.024 20.4528 264.224 19.2341C262.73 16.7967 260.756 14.8362 257.715 14.8362C254.994 14.8362 252.966 16.2669 252.966 18.5453C252.966 25.2216 271 25.4335 271 34.7592C271 39.9518 265.398 42.7601 259.529 42.7601Z" fill="#181818"/>
      <path d="M3.89379 14.1626L0 10.7307L3.89379 7.2988L7.78759 10.7307L3.89379 14.1626ZM7.78759 41.8593H0V17.1111H7.78759V41.8593Z" fill="#181818"/>
      <path d="M27.1615 16.3377C31.9801 16.3377 35.2411 19.4796 35.2411 25.1349V41.8593H27.4535V27.6001C27.4535 23.8782 26.1394 22.6214 23.5597 22.6214C20.5907 22.6214 18.8872 24.1199 18.8872 27.5518V41.8593H11.0996V17.1111H18.8872V20.688H18.9845C20.2987 18.4162 22.7323 16.3377 27.1615 16.3377Z" fill="#181818"/>
      <path d="M40.265 17.1111V15.371C40.265 9.32893 42.6013 6.86377 47.9553 6.86377C49.4154 6.86377 50.7296 7.00878 52.3845 7.34714V12.8092C51.4597 12.7125 51.0703 12.6641 50.4376 12.6641C49.0747 12.6641 48.0526 12.9058 48.0526 15.5643V17.1111H52.3845V22.9115H48.0526V41.8593H40.265V22.9115H36.9066V17.1111H40.265ZM58.8579 14.1626L54.9641 10.7307L58.8579 7.2988L62.7517 10.7307L58.8579 14.1626ZM62.7517 41.8593H54.9641V17.1111H62.7517V41.8593Z" fill="#181818"/>
      <path d="M82.11 16.3377C86.9286 16.3377 90.1896 19.4796 90.1896 25.1349V41.8593H82.402V27.6001C82.402 23.8782 81.0879 22.6214 78.5082 22.6214C75.5392 22.6214 73.8357 24.1199 73.8357 27.5518V41.8593H66.0481V17.1111H73.8357V20.688H73.933C75.2472 18.4162 77.6808 16.3377 82.11 16.3377Z" fill="#181818"/>
      <path d="M97.2498 14.1626L93.356 10.7307L97.2498 7.2988L101.144 10.7307L97.2498 14.1626ZM101.144 41.8593H93.356V17.1111H101.144V41.8593Z" fill="#181818"/>
      <path d="M116.77 36.5423C117.5 36.5423 117.938 36.494 118.863 36.349V41.811C117.208 42.1977 115.796 42.3427 114.239 42.3427C108.787 42.3427 106.451 39.8776 106.451 33.8355V22.9115H102.995V17.1111H106.451V10.199H114.239V17.1111H118.571V22.9115H114.239V33.6422C114.239 36.3007 115.261 36.5423 116.77 36.5423Z" fill="#181818"/>
      <path d="M126.613 50.4149C124.909 50.4149 123.595 50.2699 121.94 49.9315V44.0345C122.768 44.1312 123.401 44.1795 124.277 44.1795C125.786 44.1795 127.976 44.1312 128.657 41.521L118.728 17.1111H126.759L132.6 33.4005H132.697L138.051 17.1111H145.741L136.639 41.9077C134.547 47.563 132.113 50.4149 126.613 50.4149Z" fill="#181818"/>
    </svg>
  </div>
  <p class="description">Create infinite grid with images - right inside Figma.</p>
  <button class="see-how-btn" id="instruction-btn">‚ñ∂Ô∏è See How to Use the Plugin</button>
  <div class="container">
    <div class="input-group">
      <label>Image URLs *</label>
      <div class="input-row">
        <input type="text" id="image-url-input" placeholder="Enter image URL" />
        <button class="add-btn" id="add-url">+ Add</button>
      </div>
      <div class="tip">üí° Tip: Generate image links via Supabase. <span class="learn-how" id="learn-how">learn how</span></div>
      <div class="url-list" id="url-list"></div>
    </div>
    <div id="infinity-grid-container" class="infinity-grid-container"></div>
    <div class="input-group">
      <label> Grid background Color *</label>
      <div class="color-row">
        <input type="color" id="bg-color-picker" value="#000000" />
        <input type="text" id="bg-color-hex" value="#000000" maxlength="7" />
      </div>
    </div>
    <div class="input-group">
      <label for="iframe-height">Grid height (px) *</label>
      <input type="number" id="iframe-height" min="100" max="2000" value="600" style="width: 100%; background: #181818; border: 1px solid #333; color: #fff; border-radius: 8px; padding: 8px 12px; font-size: 1rem; outline: none;width: fit-content" />
    </div>
    <button class="generate-btn" id="generate-btn">Generate Grid</button>
    <div id="iframe-output" style="display:none;">
      <div class="grid-preview-title" id="grid-preview-title" style="display:none;">Grid Preview</div>
      <iframe class="iframe-preview" id="iframe-preview" style="display:none;"></iframe>
      <div class="iframe-code-block" id="iframe-code"></div>
      <button class="copy-btn" id="copy-btn">Copy HTML Code</button>
    </div>
  </div>
  <footer style="width:100vw;display:flex;justify-content:center;align-items:center;height:80px;z-index:9999;cursor:pointer;">
    <div style="display:flex;align-items:center;justify-content:center;width:100%;height:100%;gap:20px;margin-top: 32px;">
      <img src="bottom.png" alt="Sudharsan" style="height:30%;width:auto;max-width:100vw;object-fit:contain;display:block;" />
      <script type="text/javascript" src="https://cdnjs.buymeacoffee.com/1.0.0/button.prod.min.js" data-name="bmc-button" data-slug="Uxwireframe" data-color="#FFDD00" data-emoji="‚òï" data-font="Comic" data-text="Buy me a coffee" data-outline-color="#000000" data-font-color="#000000" data-coffee-color="#ffffff"></script>
    </div>
  </footer>
  <div class="toast" id="toast">Code copied. Paste into Figma.</div>
  <div class="overlay" id="overlay">
    <div class="overlay-content">
      <button class="close-btn" id="close-overlay">√ó</button>
      <div class="overlay-title">How to add the generated iFrame code</div>
      <iframe class="vimeo-player" src="https://player.vimeo.com/video/76979871?h=8272103f6e" frameborder="0" allow="autoplay; fullscreen; picture-in-picture" allowfullscreen></iframe>
    </div>
  </div>
  <div class="overlay" id="tip-overlay">
    <div class="overlay-content">
      <button class="close-btn" id="close-tip-overlay">√ó</button>
      <div class="overlay-title">How to get a Google Drive image URL</div>
      <iframe class="vimeo-player" src="https://player.vimeo.com/video/76979871?h=8272103f6e" frameborder="0" allow="autoplay; fullscreen; picture-in-picture" allowfullscreen></iframe>
    </div>
  </div>
  <div class="overlay" id="copy-overlay">
    <div class="overlay-content">
      <button class="close-btn" id="close-copy-overlay">√ó</button>
      <div class="overlay-title">Copie‚úÖ! Just paste it in Figma. Watch the video below to see how.</div>
      <iframe class="vimeo-player" src="https://player.vimeo.com/video/1086986165?h=8272103f6e" frameborder="0" allow="autoplay; fullscreen; picture-in-picture" allowfullscreen></iframe>
    </div>
  </div>
<script>
    // State
    let urls = [];
    const urlInput = document.getElementById('image-url-input');
    const addUrlBtn = document.getElementById('add-url');
    const urlList = document.getElementById('url-list');
    const bgColorPicker = document.getElementById('bg-color-picker');
    const bgColorHex = document.getElementById('bg-color-hex');
    const iframeHeight = document.getElementById('iframe-height');
    const generateBtn = document.getElementById('generate-btn');
    const iframeOutput = document.getElementById('iframe-output');
    const iframeCodeBlock = document.getElementById('iframe-code');
    const copyBtn = document.getElementById('copy-btn');
    const toast = document.getElementById('toast');
    const instructionBtn = document.getElementById('instruction-btn');
    const overlay = document.getElementById('overlay');
    const closeOverlay = document.getElementById('close-overlay');
    const tipOverlay = document.getElementById('tip-overlay');
    const closeTipOverlay = document.getElementById('close-tip-overlay');
    const learnHow = document.getElementById('learn-how');
    const gridPreviewTitle = document.getElementById('grid-preview-title');
    const iframePreview = document.getElementById('iframe-preview');
    const infinityGridContainer = document.getElementById('infinity-grid-container');
    const copyOverlay = document.getElementById('copy-overlay');
    const closeCopyOverlay = document.getElementById('close-copy-overlay');
    const previewContainer = document.querySelector('.preview-container');
    let isDraggingPreview = false;
    let dragStartY = 0;
    let dragTimeout = null;
    let longPressTimer;

    function renderUrls() {
      urlList.innerHTML = '';
      urls.forEach((url, idx) => {
        const chip = document.createElement('div');
        chip.className = 'url-chip';
        chip.innerHTML = `<span title="${url}">${url}</span><button class="remove-btn" data-idx="${idx}">‚úï</button>`;
        urlList.appendChild(chip);
      });
      // Remove handler
      document.querySelectorAll('.remove-btn').forEach(btn => {
        btn.addEventListener('click', (e) => {
          const idx = parseInt(btn.getAttribute('data-idx'));
          urls.splice(idx, 1);
          renderUrls();
          resetCopyBtn();
        });
      });
      renderInfinityGrid();
    }

    function isValidUrl(string) {
      try {
        new URL(string);
        return true;
      } catch (_) {
        return false;
      }
    }

    function extractUrls(text) {
      const urlRegex = /(https?:\/\/[^\s]+)/g;
      return text.match(urlRegex) || [];
    }

    addUrlBtn.onclick = (e) => {
      e.preventDefault();
      const input = urlInput.value.trim();
      const extractedUrls = extractUrls(input);
      
      if (extractedUrls.length === 0) {
        showToast("Please paste valid URLs");
        urlInput.style.border = '1.5px solid #ff6b81';
        setTimeout(() => {
          urlInput.style.border = '';
        }, 1500);
        return;
      }

      extractedUrls.forEach(url => {
        if (isValidUrl(url) && !urls.includes(url)) {
          urls.push(url);
        }
      });

      urlInput.value = '';
      renderUrls();
      resetCopyBtn();
    };

    urlInput.addEventListener('keydown', (e) => {
      if (e.key === 'Enter') {
        addUrlBtn.click();
      }
    });

    // Reset copy button on input changes
    urlInput.addEventListener('input', resetCopyBtn);
    bgColorPicker.addEventListener('input', resetCopyBtn);
    bgColorHex.addEventListener('input', resetCopyBtn);
    iframeHeight.addEventListener('input', resetCopyBtn);

    // Sync color picker and hex input
    bgColorPicker.addEventListener('input', () => {
      bgColorHex.value = bgColorPicker.value;
      resetCopyBtn();
    });
    bgColorHex.addEventListener('input', () => {
      let val = bgColorHex.value;
      if (!val.startsWith('#')) val = '#' + val;
      if (/^#[0-9A-Fa-f]{6}$/.test(val)) {
        bgColorPicker.value = val;
      }
      resetCopyBtn();
    });

    function sanitizeHex(hex) {
      return hex.replace('#', '').substring(0, 6);
    }

    generateBtn.onclick = () => {
      if (urls.length === 0) {
        urlInput.focus();
        urlInput.placeholder = 'At least one image URL is required';
        urlInput.style.border = '1.5px solid #ff6b81';
        setTimeout(() => {
          urlInput.style.border = '';
          urlInput.placeholder = 'Enter image URL';
        }, 1500);
        return;
      }
      const images = urls.join(',');
      const hex = sanitizeHex(bgColorHex.value);
      const height = parseInt(iframeHeight.value) || 600;
      const iframe = `<iframe \n  src=\"https://sudharsansarathi.github.io/infinity-grid/?images=${images}&bg=%23${hex}\" \n  style=\"width:100%;height:${height}px;border:none;background:#181818;\">\n</iframe>`;
      iframeCodeBlock.textContent = iframe;
      iframeOutput.style.display = 'block';
      // Shimmer effect
      iframeCodeBlock.classList.remove('shimmer');
      void iframeCodeBlock.offsetWidth; // force reflow
      iframeCodeBlock.classList.add('shimmer');
      setTimeout(() => {
        iframeCodeBlock.classList.remove('shimmer');
      }, 1200);
      // Show preview
      gridPreviewTitle.style.display = 'block';
      iframePreview.style.display = 'block';
      iframePreview.src = `https://sudharsansarathi.github.io/infinity-grid/?images=${images}&bg=%23${hex}`;
      iframePreview.style.height = '450px';
      // Auto-scroll to iframe section
      setTimeout(() => {
        iframeOutput.scrollIntoView({ behavior: 'smooth', block: 'center' });
      }, 100);
      resetCopyBtn();
    };

    function showToast(msg) {
      toast.textContent = msg;
      toast.classList.add('show');
      setTimeout(() => {
        toast.classList.remove('show');
      }, 1600);
    }

    function resetCopyBtn() {
      copyBtn.innerHTML = 'Copy Code';
      copyBtn.classList.remove('copied');
    }

    function handleCopy() {
      navigator.clipboard.writeText(iframeCodeBlock.textContent);
      copyBtn.innerHTML = 'Code Copied ‚úÖ';
      copyBtn.classList.add('copied');
      showToast('Code copied. Paste into Figma.');
      copyOverlay.classList.add('show');
    }

    copyBtn.onclick = handleCopy;
    iframeCodeBlock.onclick = handleCopy;

    // Close copy overlay
    closeCopyOverlay.onclick = () => {
      copyOverlay.classList.remove('show');
    };
    copyOverlay.addEventListener('click', (e) => {
      if (e.target === copyOverlay) {
        copyOverlay.classList.remove('show');
      }
    });

    // Update long press handler
    iframeCodeBlock.addEventListener('mousedown', () => {
      longPressTimer = setTimeout(handleCopy, 500);
    });

    iframeCodeBlock.addEventListener('mouseup', () => {
      clearTimeout(longPressTimer);
    });

    iframeCodeBlock.addEventListener('mouseleave', () => {
      clearTimeout(longPressTimer);
    });

    // Update touch events for mobile
    iframeCodeBlock.addEventListener('touchstart', () => {
      longPressTimer = setTimeout(handleCopy, 500);
    });

    iframeCodeBlock.addEventListener('touchend', () => {
      clearTimeout(longPressTimer);
    });

    iframeCodeBlock.addEventListener('touchcancel', () => {
      clearTimeout(longPressTimer);
    });

    // Add drag handling for preview container
    previewContainer.addEventListener('pointerdown', (e) => {
      if (e.target.closest('.preview-iframe')) {
        isDraggingPreview = true;
        dragStartY = e.clientY;
        previewContainer.classList.add('expanded');
        
        // Clear any existing timeout
        if (dragTimeout) {
          clearTimeout(dragTimeout);
        }
      }
    });

    document.addEventListener('pointermove', (e) => {
      if (isDraggingPreview) {
        const deltaY = Math.abs(e.clientY - dragStartY);
        if (deltaY > 10) { // Only expand if dragged more than 10px
          previewContainer.classList.add('expanded');
        }
      }
    });

    document.addEventListener('pointerup', () => {
      if (isDraggingPreview) {
        isDraggingPreview = false;
        
        // Set a timeout to collapse the container
        dragTimeout = setTimeout(() => {
          previewContainer.classList.remove('expanded');
        }, 300); // Small delay before collapsing
      }
    });

    document.addEventListener('pointercancel', () => {
      if (isDraggingPreview) {
        isDraggingPreview = false;
        previewContainer.classList.remove('expanded');
      }
    });

    // Prevent iframe from capturing pointer events when not dragging
    previewContainer.addEventListener('pointerleave', () => {
      if (!isDraggingPreview) {
        previewContainer.classList.remove('expanded');
      }
    });

    // Overlay logic
    instructionBtn.onclick = () => {
      overlay.classList.add('show');
    };
    closeOverlay.onclick = () => {
      overlay.classList.remove('show');
    };
    overlay.addEventListener('click', (e) => {
      if (e.target === overlay) {
        overlay.classList.remove('show');
      }
    });

    // Tip overlay logic
    learnHow.onclick = () => {
      tipOverlay.classList.add('show');
    };
    closeTipOverlay.onclick = () => {
      tipOverlay.classList.remove('show');
    };
    tipOverlay.addEventListener('click', (e) => {
      if (e.target === tipOverlay) {
        tipOverlay.classList.remove('show');
      }
    });

    // Optimize image loading with priority hints and preconnect
    function optimizeImageLoading() {
      // Add preconnect for the image domain
      const preconnectLink = document.createElement('link');
      preconnectLink.rel = 'preconnect';
      preconnectLink.href = 'https://ttihvdaqsmhtqyvqxhrb.supabase.co';
      document.head.appendChild(preconnectLink);

      // Preload critical images
      const criticalImages = [
        'https://ttihvdaqsmhtqyvqxhrb.supabase.co/storage/v1/object/public/dog//image%2030.png',
        'https://ttihvdaqsmhtqyvqxhrb.supabase.co/storage/v1/object/public/dog//image%2031.png',
        'https://ttihvdaqsmhtqyvqxhrb.supabase.co/storage/v1/object/public/dog//image%2032.png',
        'https://ttihvdaqsmhtqyvqxhrb.supabase.co/storage/v1/object/public/dog//image%2033.png',
        'https://ttihvdaqsmhtqyvqxhrb.supabase.co/storage/v1/object/public/dog//image%2034.png'
      ];

      criticalImages.forEach(url => {
        const link = document.createElement('link');
        link.rel = 'preload';
        link.as = 'image';
        link.href = url;
        link.fetchPriority = 'high';
        document.head.appendChild(link);
      });

      // Load remaining images in background
      const remainingImages = [
        'https://ttihvdaqsmhtqyvqxhrb.supabase.co/storage/v1/object/public/dog//image%2035.png',
        // ... rest of the image URLs ...
        'https://ttihvdaqsmhtqyvqxhrb.supabase.co/storage/v1/object/public/dog//image%2069.png'
      ];

      // Create a queue for loading remaining images
      const imageQueue = [...remainingImages];
      const maxConcurrent = 4; // Load 4 images at a time
      let activeLoads = 0;

      function loadNextImage() {
        if (imageQueue.length === 0 || activeLoads >= maxConcurrent) return;

        const url = imageQueue.shift();
        activeLoads++;

        const img = new Image();
        img.onload = img.onerror = () => {
          activeLoads--;
          loadNextImage();
        };
        img.src = url;
      }

      // Start loading remaining images
      for (let i = 0; i < maxConcurrent; i++) {
        loadNextImage();
      }
    }

    // Call optimization on page load
    window.addEventListener('load', optimizeImageLoading);
</script>
</body>
</html> 